{% extends 'base.html' %}
{% load solution_filters %}
{% block title %}
Evaluate Challenge {{ finalRubric.challenge.name }}
{% endblock %}

{% block content %}

<h1>Coaching Review - {{ finalRubric.challenge.name }}</h1>
    <h2>Evaluator: {{ finalRubric.evaluator.first_name }} {{ finalRubric.evaluator.last_name }}</h2>
    <p>Submitted: {{ finalRubric.evaluator }}</p>
    <h3>General Feedback</h3>
    <p>{{ finalRubric.generalFeedback|safe }}</p>
        <form action=""  method="post" enctype="multipart/form-data">

            <div class="rubricField">
                {{ rFormset.management_form }}

                {% for form in rFormset %}
                        <p>{{ form.errors }}</p>
                        <h3 id="h3{{ form.learningObjective.auto_id }}"></h3>
                        <span style="display: none">{{ form.learningObjective }}</span>

                            {{ form.student }}{{ form.needsLaterAttention }}{{ form.completionLevel }}{{ form.ignore }}{{ form.evaluated }}
                            <li>
                                <label>{{ form.evidencePresent.label }}</label>
                                <p>{{ form.evidencePresent }}</p>
                            </li>
                            <li>
                                <label>{{ form.evidenceMissing.label }}</label>
                                <p>{{ form.evidenceMissing }}</p>
                            </li>
                            <li>
                                <label>{{ form.feedback.label }}</label>
                                <p>{{ form.feedback }}</p>
                            </li>
                            <li>
                                <label>{{ form.suggestions.label }}</label>
                                <p>{{ form.suggestions }}</p>
                            </li>
                            {{ form.id }}


                            <script>
                                var options = document.getElementById("{{ form.learningObjective.auto_id }}");
                                var selectedText = options.options[options.selectedIndex].text;

                                document.getElementById("h3{{ form.learningObjective.auto_id }}").innerHTML = selectedText;
                            </script>

                    {% endfor %}
            </div>

        {% csrf_token %}
        <input type="submit" value="Submit">

    </form>
{% endblock %}