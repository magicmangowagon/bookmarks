{% extends 'base.html' %}

{% block title %}
Evaluate a Challenge
{% endblock %}

{% block content %}

<h1>{{ challenge }} - {{ student.userOwner.first_name }} {{ student.userOwner.last_name }}</h1>

    <h2>Evaluate {{ student.userOwner.first_name }}'s solution</h2>

    <form action=""  method="post">

        <div class="rubricField">
        {{ formset.management_form }}
        {% for form in formset %}

            <h3>{{ form.learningObjective }}</h3>
            <p>{{ form.student }}</p>

            <ul>
                {% if userRole == 4 or 2 %}
                    <li><label>{{ form.evidenceMissing.label }}</label>
                        {{ form.evidencePresent }}</li>

                    <li><label>{{ form.evidencePresent.label }}</label>
                        {{ form.evidenceMissing }}</li>
                {% endif %}

                <li><label>{{ form.feedback.label }}</label>
                    {{ form.feedback }}</li>

                <li><label>{{ form.suggestions.label }}</label>
                    {{ form.suggestions }}</li>

            <p><label>{{ form.completionLevel.label }}</label>
                {{ form.completionLevel }}</p>
            </ul>

            <div class="slidecontainer">
              <input type="range" min="1" max="100" value="0" class="slider" id="slider{{ form.learningObjective.value }}">
              <p>Value: <span id="value{{ form.learningObjective.value }}"></span></p>
            </div>

            <script>
                var slider{{ form.learningObjective.value }} = document.getElementById("slider{{ form.learningObjective.value }}");
                var output{{ form.learningObjective.value }} = document.getElementById("{{ form.completionLevel.auto_id }}");
                slider{{ form.learningObjective.value }}.value = output{{ form.learningObjective.value }}.value;

                slider{{ form.learningObjective.value }}.oninput = function()
                {
                    output{{ form.learningObjective.value }}.value = this.value;
                }
            </script>
        {{ form.completionLevel.auto_id }}
        {{ form.id }}
        {% endfor %}

        </div>

        {% csrf_token %}




        <p><input type="submit" value="Submit evaluation"></p>
    </form>

    {% if form.error %}
This should pop up if there is an error
{% endif %}
{% endblock %}